<html>
<head>
  <meta charset="utf-8">
  <title>Mocha Tests</title>
  <link rel="stylesheet" href="../node_modules/mocha/mocha.css" />
</head>
<body>
  <div id="mocha"></div>
  <script src="../node_modules/expect.js/expect.js"></script>
  <script src="../node_modules/mocha/mocha.js"></script>
  <script src="../node_modules/happen/src/happen.js"></script>

  <script src="lib/sinon-server-1.5.2.js"></script>

  <!--[if IE]>
  <script src="lib/sinon-ie-1.5.2.js"></script>
  <![endif]-->

  <script src="../node_modules/reqwest/reqwest.js"></script>
  <script src="../ext/leaflet/leaflet-src.js"></script>

  <script src="../src/mapbox.js"></script>
  <script src="../src/marker.js"></script>
  <script src="../src/tilejson.js"></script>
  <script src="../src/legend.js"></script>
  <script src="../src/geocoder.js"></script>

  <script>
    mocha.setup('bdd');
    mocha.ignoreLeaks();

    expect.Assertion.prototype.near = function(expected, delta) {
        expect(this.obj.lat).to.be.within(expected.lat - delta, expected.lat + delta);
        expect(this.obj.lng).to.be.within(expected.lng - delta, expected.lng + delta);
    };

    function layersOf(layerGroup) {
        var result = [];
        layerGroup.eachLayer(function(layer) {
            result.push(layer);
        });
        return result;
    }
  </script>

  <script src="spec/mapbox.js"></script>
  <script src="spec/marker.js"></script>
  <script src="spec/layer_group.js"></script>
  <script src="spec/tile_layer.js"></script>
  <script src="spec/legend.js"></script>
  <script src="spec/geocoder.js"></script>

  <script>
    mocha.run();
  </script>
</body>
</html>
