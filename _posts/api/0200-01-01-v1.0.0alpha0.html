---
layout: api
title: v1.0.0alpha0
categories: api
navigation:
version: v1.0.0alpha0
navigation:
- title: mapbox.map
  items:
- title: mapbox.tileLayer
  items:
- title: mapbox.markerLayer
  items:
- title: mapbox.markerLayer.setFilter
  items:
- title: mapbox.markerLayer.getFilter
  items:
- title: mapbox.markerLayer.setGeoJSON
  items:
- title: mapbox.markerLayer.getGeoJSON
  items:
- title: mapbox.geocoder
  items:
- title: mapbox.geocoder.query
  items:
- title: mapbox.geocoder.reverseQuery
  items:
- title: mapbox.hash
  items:
- title: mapbox.legendControl
  items:
- title: mapbox.interactionControl
  items:
- title: mapbox.geocoderControl
  items:
- title: mapbox.geocoder.setID
  items:
- title: mapbox.geocoder.setTileJSON
  items:
- title: mapbox.marker.icon
  items:
- title: mapbox.marker.style
  items:

---
<div></div><h1>Map</h1>
<div id="content-undefined"class="depth-1"></div><h2 id="mapbox.map">mapbox.map<span class="bracket">(</span><span class="args">element, id | url | tilejson, [options]</span><span class="bracket">)</span></h2>
<div id="content-mapbox.map"class="depth-2"><p>Create and automatically configure a map with layers, markers, and
interactivity.

</p>
<p><em>Arguments</em>:

</p>
<p>The first argument is required and must be the id of an element, or a DOM element
reference.

</p>
<p>The second argument is required and must be:

</p>
<ul>
<li>An <code>id</code> string <code>examples.map-foo</code></li>
<li>A URL to TileJSON, like <code>http://a.tiles.mapbox.com/v3/examples.map-0l53fhk2.json</code></li>
<li>A TileJSON object, from your own Javascript code</li>
</ul>
<p>The third argument is optional. If provided, it is the same options
as provided to <a href="http://leafletjs.com/reference.html#map-options">L.Map</a>
with the following additions:

</p>
<ul>
<li><code>tileLayer</code> (boolean). Whether or not to add a <code>mapbox.tileLayer</code> based on
the TileJSON. Default: <code>true</code>.</li>
<li><code>markerLayer</code> (boolean). Whether or not to add a <code>mapbox.markerLayer</code> based on
the TileJSON. Default: <code>true</code>.</li>
<li><code>gridLayer</code> (boolean). Whether or not to add a <code>mapbox.gridLayer</code> based on
the TileJSON. Default: <code>true</code>.</li>
<li><code>legendControl</code> (boolean). Whether or not to add a <code>mapbox.legendControl</code>.
Default: <code>true</code>.</li>
</ul>
</div><h1>Layers</h1>
<div id="content-mapbox.map"class="depth-1"></div><h2 id="mapbox.tileLayer">mapbox.tileLayer<span class="bracket">(</span><span class="args">id | url | tilejson, [options]</span><span class="bracket">)</span></h2>
<div id="content-mapbox.tileLayer"class="depth-2"><p>You can add a tiled layer to your map with <code>mapbox.tileLayer()</code>, a simple
interface to layers from MapBox and elsewhere.

</p>
<p><em>Arguments</em>:

</p>
<p>The first argument is required and must be:

</p>
<ul>
<li>An <code>id</code> string <code>examples.map-foo</code></li>
<li>A URL to TileJSON, like <code>http://a.tiles.mapbox.com/v3/examples.map-0l53fhk2.json</code></li>
<li>A TileJSON object, from your own Javascript code</li>
</ul>
<p>The second argument is optional. If provided, it is the same options
as provided to <a href="http://leafletjs.com/reference.html#tilelayer">L.TileLayer</a>
with one addition:

</p>
<ul>
<li><code>retinaVersion</code>, if provided, is an alternative value for the first argument
to <code>mapbox.tileLayer</code> which, if retina is detected, is used instead.</li>
</ul>
<p><em>Example</em>:

</p>
<pre><code>// the second argument is optional
var layer = new mapbox.tileLayer(&#39;examples.map-20v6611k&#39;);

// you can also provide a full url to a tilejson resource
var layer = new mapbox.tileLayer(&#39;http://a.tiles.mapbox.com/v3/examples.map-0l53fhk2.json&#39;);

// if provided,you can support retina tiles
var layer = new mapbox.tileLayer(&#39;examples.map-20v6611k&#39;, {
    detectRetina: true,
    // if retina is detected, this layer is used instead
    retinaVersion: &#39;examples.map-zswgei2n&#39;
});</code></pre>
<p><em>Returns</em> a <code>mapbox.tileLayer</code> object.

</p>
</div><h2 id="mapbox.markerLayer">mapbox.markerLayer<span class="bracket">(</span><span class="args">id | url | tilejson, [options]</span><span class="bracket">)</span></h2>
<div id="content-mapbox.markerLayer"class="depth-2"><p><code>mapbox.markerLayer</code> provides an easy way to integrate <a href="http://www.geojson.org/">GeoJSON</a>
from MapBox and elsewhere into your map.

</p>
<p><em>Arguments</em>:

</p>
<ol>
<li><p>required and must be:</p>
</li>
<li><p>An <code>id</code> string <code>examples.map-foo</code></p>
</li>
<li>A URL to TileJSON, like <code>http://a.tiles.mapbox.com/v3/examples.map-0l53fhk2.json</code></li>
<li>A GeoJSON object, from your own Javascript code</li>
</ol>
<p>The second argument is optional. If provided, it is the same options
as provided to <a href="http://leafletjs.com/reference.html#featuregroup">L.FeatureGroup</a>
with one addition:

</p>
<p><em>Example</em>:

</p>
<pre><code>var markerLayer = (new mapbox.markerLayer(geojson))
    .addTo(map);</code></pre>
<p><em>Returns</em> a <code>mapbox.markerLayer</code> object.

</p>
</div><h2 id="mapbox.markerLayer.setFilter">mapbox.markerLayer.setFilter<span class="bracket">(</span><span class="args">function</span><span class="bracket">)</span></h2>
<div id="content-mapbox.markerLayer.setFilter"class="depth-2"><p>Sets the filter function for this data layer.

</p>
<p><em>Arguments</em>:

</p>
<ol>
<li>a function that takes GeoJSON features and
returns true to show and false to hide features.</li>
</ol>
<p><em>Example</em>:

</p>
<pre><code>var markerLayer = (new mapbox.markerLayer(geojson))
    // hide all markers
    .setFilter(function() { return false; })
    .addTo(map);</code></pre>
<p><em>Returns</em> the markerLayer object.

</p>
</div><h2 id="mapbox.markerLayer.getFilter">mapbox.markerLayer.getFilter<span class="bracket">(</span><span class="args"></span><span class="bracket">)</span></h2>
<div id="content-mapbox.markerLayer.getFilter"class="depth-2"><p>Gets the filter function for this data layer.

</p>
<p><em>Arguments</em>: none

</p>
<p><em>Example</em>:

</p>
<pre><code>var markerLayer = (new mapbox.markerLayer(geojson))
    // hide all markers
    .setFilter(function() { return false; })
    .addTo(map);

// get the filter function
var fn = markerLayer.getFilter()</code></pre>
<p><em>Returns</em> the filter function.

</p>
</div><h2 id="mapbox.markerLayer.setGeoJSON">mapbox.markerLayer.setGeoJSON<span class="bracket">(</span><span class="args">features</span><span class="bracket">)</span></h2>
<div id="content-mapbox.markerLayer.setGeoJSON"class="depth-2"><p>Set the contents of a markers layer: run the provided
features through the filter function and then through the factory function to create elements
for the map. If the layer already has features, they are replaced with the new features.
An empty array will clear the layer of all features.

</p>
<p><em>Arguments:</em>

</p>
<ul>
<li><code>features</code>, an array of <a href="http://geojson.org/geojson-spec.html#feature-objects">GeoJSON feature objects</a>,
or omitted to get the current value.</li>
</ul>
<p><em>Returns</em> the markerLayer object

</p>
</div><h2 id="mapbox.markerLayer.getGeoJSON">mapbox.markerLayer.getGeoJSON<span class="bracket">(</span><span class="args">features</span><span class="bracket">)</span></h2>
<div id="content-mapbox.markerLayer.getGeoJSON"class="depth-2"><p>Get the contents of this layer as GeoJSON data.

</p>
<p><em>Arguments:</em> none

</p>
<p><em>Returns</em> the GeoJSON represented by this layer

</p>
</div><h1>Geocoding</h1>
<div id="content-mapbox.markerLayer.getGeoJSON"class="depth-1"></div><h2 id="mapbox.geocoder">mapbox.geocoder<span class="bracket">(</span><span class="args">id | url</span><span class="bracket">)</span></h2>
<div id="content-mapbox.geocoder"class="depth-2"><p>A low-level interface to geocoding, useful for more complex uses and reverse-geocoding.

</p>
<ol>
<li><p>(required) must be:</p>
</li>
<li><p>An <code>id</code> string <code>examples.map-foo</code></p>
</li>
<li>A URL to TileJSON, like <code>http://a.tiles.mapbox.com/v3/examples.map-0l53fhk2.json</code></li>
</ol>
<p><em>Returns</em> a <code>mapbox.geocoder</code> object.

</p>
</div><h2 id="mapbox.geocoder.query">mapbox.geocoder.query<span class="bracket">(</span><span class="args">queryString, callback</span><span class="bracket">)</span></h2>
<div id="content-mapbox.geocoder.query"class="depth-2"><p>Queries the geocoder with a query string, and returns its result, if any.

</p>
<p><em>Arguments</em>:

</p>
<ol>
<li>(required) a query, expressed as a string, like &#39;Arkansas&#39;</li>
<li>(required) a callback</li>
</ol>
<p>The callback is called with arguments

</p>
<ol>
<li>An error, if any</li>
<li><p>The result. This is an object with the following members:</p>
<pre><code> { results: // raw results
 latlng: // a map-friendly latlng array
 bounds: // geojson-style bounds of the first result
 lbounds: // leaflet-style bounds of the first result
 }</code></pre>
</li>
</ol>
<p><em>Returns</em>: the geocoder object. The return value of this function is not useful - you must use a callback to get results.

</p>
</div><h2 id="mapbox.geocoder.reverseQuery">mapbox.geocoder.reverseQuery<span class="bracket">(</span><span class="args">location, callback</span><span class="bracket">)</span></h2>
<div id="content-mapbox.geocoder.reverseQuery"class="depth-2"><p>Queries the geocoder with a location, and returns its result, if any.

</p>
<p><em>Arguments</em>:

</p>
<ol>
<li><p>(required) a query, expressed as an object:</p>
<pre><code>  [lon, lat] // an array of lon, lat
  { lat: 0, lon: 0 } // a lon, lat object
  { lat: 0, lng: 0 } // a lng, lat object</code></pre>
</li>
</ol>
<p>The first argument can also be an array of objects in that
form to geocode more than one item.

</p>
<ol>
<li>(required) a callback</li>
</ol>
<p>The callback is called with arguments

</p>
<ol>
<li>An error, if any</li>
<li>The result. This is an object of the raw result from MapBox.</li>
</ol>
<p><em>Returns</em>: the geocoder object. The return value of this function is not useful - you must use a callback to get results.

</p>
</div><h1>Controls</h1>
<div id="content-mapbox.geocoder.reverseQuery"class="depth-1"></div><h2 id="mapbox.hash">mapbox.hash<span class="bracket">(</span><span class="args"></span><span class="bracket">)</span></h2>
<div id="content-mapbox.hash"class="depth-2"><p>Adds hash functionality to the map, so that pan and zoom state are copied
when the URL of the page is copied.

</p>
<p><em>Arguments</em>: none

</p>
<p><em>Example</em>

</p>
<pre><code>var map = L.map(&#39;map&#39;)
    .setView([37, -77], 5)
    .addControl(new mapbox.hash());</code></pre>
<p><em>Returns</em> a <code>mapbox.hash</code> object.

</p>
<p><em>Ref</em>: this code uses <a href="https://github.com/mlevans/leaflet-hash">Leaflet.hash</a>
internally.

</p>
</div><h2 id="mapbox.legendControl">mapbox.legendControl<span class="bracket">(</span><span class="args"></span><span class="bracket">)</span></h2>
<div id="content-mapbox.legendControl"class="depth-2"><p>A map control that shows legends added to maps in MapBox. Legends are auto-detected from active layers.

</p>
<p><em>Arguments</em>:

</p>
<ol>
<li><p>(optional) an options object. Beyond the default options for map controls,
this object has one special parameter:</p>
</li>
<li><p><code>sanitize</code>: enable or disable HTML sanitization of legend data before
display. The default, <code>true</code>, is recommended.</p>
</li>
</ol>
<p><em>Returns</em>: a <code>mapbox.Legend</code> object.

</p>
</div><h2 id="mapbox.interactionControl">mapbox.interactionControl<span class="bracket">(</span><span class="args"></span><span class="bracket">)</span></h2>
<div id="content-mapbox.interactionControl"class="depth-2"><p>Interaction is what we call interactive parts of maps that are created with
the powerful <a href="http://mapbox.com/tilemill/docs/crashcourse/tooltips/">tooltips &amp; regions system</a>
in TileMill. Under the hood, it&#39;s powered by
the <a href="https://github.com/mapbox/utfgrid-spec">open UTFGrid specification.</a>.

</p>
<p><em>Arguments</em>:

</p>
<ul>
<li>The first argument must be a layer created with <code>mapbox.interaction()</code></li>
<li><p>The second argument can be an options object. Valid options are:</p>
</li>
<li><p><code>sanitize</code>: enable or disable HTML sanitization of interactivity data before display. The default, <code>true</code>, is recommended.</p>
</li>
<li><p><code>mapping</code>: an object of the types of interaction showed on each interaction. The default is</p>
<pre><code>  mapping: {
    mousemove: [&#39;teaser&#39;],
    click: [&#39;full&#39;],
    mouseout: [function() { return &#39;&#39;; }]
  }</code></pre>
</li>
</ul>
<p>Each mapping is from an event type, like <code>mousemove</code>, to an array of options
to try. To fall-back the <code>teaser</code> formatter to <code>full</code>, one could write
<code>[&#39;teaser&#39;, &#39;full&#39;]</code>. <code>location</code> can be specified to use the location
formatter and change page location.

</p>
<p><em>Returns</em>: a <code>mapbox.interactionControl</code> object.

</p>
</div><h2 id="mapbox.geocoderControl">mapbox.geocoderControl<span class="bracket">(</span><span class="args">id | url</span><span class="bracket">)</span></h2>
<div id="content-mapbox.geocoderControl"class="depth-2"><p>Adds geocoder functionality as well as a UI element to a map. This uses
the <a href="http://mapbox.com/developers/api/#geocoding">MapBox Geocoding API</a>.

</p>
<p>This function is currently in private beta:
<a href="http://mapbox.com/about/contact/">contact MapBox</a> before using this functionality.

</p>
<p><em>Arguments</em>:

</p>
<ol>
<li><p>(required) either:</p>
</li>
<li><p>An <code>id</code> string <code>examples.map-foo</code></p>
</li>
<li>A URL to TileJSON, like <code>http://a.tiles.mapbox.com/v3/examples.map-0l53fhk2.json</code></li>
</ol>
<p><em>Example</em>

</p>
<pre><code>var map = L.map(&#39;map&#39;)
    .setView([37, -77], 5)
    .addControl(new mapbox.geocoder(&#39;examples.map-vyofok3q&#39;));</code></pre>
<p><em>Returns</em> a <code>mapbox.geocoderControl</code> object.

</p>
</div><h2 id="mapbox.geocoder.setID">mapbox.geocoder.setID<span class="bracket">(</span><span class="args">[id]</span><span class="bracket">)</span></h2>
<div id="content-mapbox.geocoder.setID"class="depth-2"><p>Set or get the map id used for geocoding.

</p>
<p><em>Arguments</em>:

</p>
<ol>
<li>(optional) a map id</li>
</ol>
<p><em>Returns</em>: the existing id value if no argument is given, or the geocoder
object if a new value is given.

</p>
</div><h2 id="mapbox.geocoder.setTileJSON">mapbox.geocoder.setTileJSON<span class="bracket">(</span><span class="args">tilejson</span><span class="bracket">)</span></h2>
<div id="content-mapbox.geocoder.setTileJSON"class="depth-2"><p>Set the TileJSON used for geocoding.

</p>
<p><em>Arguments</em>:

</p>
<ol>
<li>A TileJSON object</li>
</ol>
<p><em>Returns</em>: the geocoder object

</p>
</div><h1>Markers</h1>
<div id="content-mapbox.geocoder.setTileJSON"class="depth-1"></div><h2 id="mapbox.marker.icon">mapbox.marker.icon</h2>
<div id="content-mapbox.marker.icon"class="depth-2"><p>A core icon generator used in <code>mapbox.marker.style</code>

</p>
<p><em>Arguments</em>:

</p>
<ol>
<li>A GeoJSON feature object</li>
</ol>
<p><em>Returns</em>:

</p>
<p>A <code>L.Icon</code> object with custom settings for <code>iconUrl</code>, <code>iconSize</code>, <code>iconAnchor</code>,
and <code>popupAnchor</code>.

</p>
</div><h2 id="mapbox.marker.style">mapbox.marker.style</h2>
<div id="content-mapbox.marker.style"class="depth-2"><p>An icon generator for use in conjunction with <code>pointToLayer</code> to generate
markers from the <a href="http://mapbox.com/developers/api/#markers">MapBox Markers API</a>
and support the <a href="https://github.com/mapbox/simplestyle-spec">simplestyle-spec</a> for
features.

</p>
<p><em>Arguments</em>:

</p>
<ol>
<li>A GeoJSON feature object</li>
<li>The latitude, longitude position of the marker</li>
</ol>
<p><em>Examples</em>:

</p>
<pre><code>L.geoJson(geoJson, {
    pointToLayer: mapbox.marker.style,
});</code></pre>
<p><em>Returns</em>:

</p>
<p>A <code>L.Marker</code> object with the latitude, longitude position and a styled marker
</p>
</div>
